<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tile Calculator</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://kit.fontawesome.com/a5f92d7a0b.js" crossorigin="anonymous"></script>
    <style>
        * {
            font-family: Arial, Helvetica, sans-serif;
        }

        label {
            color: #292828de;
        }

        .menu {
            border: 1px solid #ddd;
            outline: none;
            width: 200px;
            height: 40px;
            border-radius: 2px;
        }

        .value {
            border: 1px solid #ddd;
            outline: none;
            width: 120px;
            height: 40px;
            border-radius: 2px;
            padding-left: 20px;
        }

        .result {
            border: 1px solid #ddd;
            outline: none;
            width: 120px;
            height: 40px;
            border-radius: 2px;
            padding-left: 20px;
        }

        button {
            height: 44px;
            width: 40px;
            align-self: flex-end;
        }

        #squareMeterInput[disabled] {
            background-color: #f0f0f0;
            color: #888;
        }

        #result {
            color: red;
        }

        .warning {
            color: red;
        }
    </style>
</head>

<body>

    <label for="tileSize">Select Tile Size:</label>
    <select class="menu" id="tileSize">
        <option value="152x76">152mm x 76mm</option>
        <option value="305x305">305mm x 305mm</option>
        <option value="400x100">400mm x 100mm</option>
        <option value="400x200">400mm x 200mm</option>
        <option value="400x400">400mm x 400mm</option>
        <option value="600x400">600mm x 400mm</option>
        <option value="600x600">600mm x 600mm</option>
    </select>

    <br>
    <br>

    <input type="checkbox" id="disableSquareMeter" onchange="toggleSquareMeterInput()">
    <label for="disableSquareMeter">Free Sample</label>

    <br>
    <br>

    <div style="display: flex;">
        <div style="display: flex; flex-direction: column; gap: 4px;">
            <label style="align-self: center;font-weight: 600;" for="squareMeterInput">m²</label>
            <input class="value" type="number" id="squareMeterInput" placeholder="m²">
        </div>
        <button onclick="swapInputs()"><i class="fa">
                &#xf362;
            </i></button>
        <div style="display: flex; flex-direction: column; gap: 4px;">
            <label style="align-self: center;font-weight: 600;" for="tilePieceInput">Quantity</label>
            <input class="value" type="number" id="tilePieceInput" placeholder="Quantity">
        </div>
    </div>
    <p class="warning" id="decimalWarning"></p>
    <br>
    <p id="result"></p>

    <script>
        $('#squareMeterInput').on('input', function () {
            $('#tilePieceInput').val(''); // Reset tile piece input when square meter input changes
            $('#decimalWarning').text(''); // Clear decimal warning
            calculate();
        });

        $('#tilePieceInput').on('input', function () {
            var isDecimal = $('#tilePieceInput').val().includes('.', ",");
            if (isDecimal) {
                $('#decimalWarning').text('Decimal values are not allowed for quantity.');
            } else {
                $('#decimalWarning').text('');
            }
            $('#squareMeterInput').val(''); // Reset square meter input when tile piece input changes
            calculate();
        });


        $('#tilePieceInput').on('change', function () {
            calculate();
        });

        $('#tileSize, #squareMeterInput').on('change input', function () {
            calculate();
        });

        

        function handleTileSizeChange() {
            var selectedSize = $('#tileSize').val();
            // If the selected size is 100x100, disable the square meter input
            var isFreeSample = selectedSize === '100x100';
            $('#disableSquareMeter').prop('checked', isFreeSample);
            $('#squareMeterInput').prop('disabled', isFreeSample);
        }

        function handleSquareMeterDisableChange() {
            var disableSquareMeter = $('#disableSquareMeter').prop('checked');
            $('#squareMeterInput').prop('disabled', disableSquareMeter);
        }

        function calculate() {
            if ($('#disableSquareMeter').prop('checked')) {
                $('#result').text('Square meter input is disabled.');
                return;
            }
            var selectedSize = $('#tileSize').val();
            var squareMeterInput = parseFloat($('#squareMeterInput').val());
            var tilePieceInput = parseInt($('#tilePieceInput').val());

            var dimensions = selectedSize.split('x');
            var tileArea = dimensions[0] * dimensions[1] / 1000000; // Convert to square meters

            // Clear result message
            $('#result').text('');

            if (!isNaN(squareMeterInput)) {
                // Calculate the number of tiles based on square meters
                var tilesRequired = Math.ceil(squareMeterInput / tileArea);
                $('#tilePieceInput').val(tilesRequired);
            } else if (!isNaN(tilePieceInput)) {
                // Calculate square meters based on the number of tiles
                var squareMeters = tilePieceInput * tileArea;
                $('#squareMeterInput').val(squareMeters.toFixed(3));
            } else {
                $('#result').text('Please enter a valid number.');
            }
        }

        function toggleSquareMeterInput() {
            var disableSquareMeter = $('#disableSquareMeter').prop('checked');
            $('#squareMeterInput').prop('disabled', disableSquareMeter);
        }

        function swapInputs() {
            // Toggle between swapping values and swapping places
            var squareMeterValue = $('#squareMeterInput').val();
            var tilePieceValue = $('#tilePieceInput').val();

            if (squareMeterValue || tilePieceValue) {
                // Swap values
                $('#squareMeterInput').val(tilePieceValue);
                $('#tilePieceInput').val(squareMeterValue);
            } else {
                // Swap places
                var $squareMeterInput = $('#squareMeterInput');
                var $tilePieceInput = $('#tilePieceInput');
                var $button = $('button');

                $squareMeterInput.after($tilePieceInput);
                $tilePieceInput.after($button);
            }
        }
    </script>
</body>

</html>